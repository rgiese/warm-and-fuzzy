directive @requiresPermission(permission: String) on FIELD_DEFINITION

schema {
  query: Query
  mutation: Mutation
}

type Query {
  getThermostatConfigurations: [ThermostatConfiguration!]! @requiresPermission(permission: "read:config")
  getThermostatConfiguration(deviceId: ID!): ThermostatConfiguration! @requiresPermission(permission: "read:config")
}

type Mutation {
  createThermostatConfiguration(
    thermostatConfiguration: ThermostatConfigurationCreateInput!
  ): ThermostatConfiguration! @requiresPermission(permission: "write:config")
  updateThermostatConfiguration(
    thermostatConfiguration: ThermostatConfigurationUpdateInput!
  ): ThermostatConfiguration! @requiresPermission(permission: "write:config")
}

#
# ThermostatConfiguration
#

input ThermostatConfigurationCreateInput {
  deviceId: ID!
  name: String!

  allowedActions: [ThermostatAction!]!
  setPointHeat: Float!
  setPointCool: Float!
  threshold: Float!

  cadence: Int!
}

input ThermostatConfigurationUpdateInput {
  deviceId: ID!
  name: String

  allowedActions: [ThermostatAction!]
  setPointHeat: Float
  setPointCool: Float
  threshold: Float

  cadence: Int
}

type ThermostatConfiguration {
  deviceId: ID!
  tenant: String!

  name: String!

  allowedActions: [ThermostatAction!]!
  setPointHeat: Float!
  setPointCool: Float!
  threshold: Float!

  cadence: Int!
}

enum ThermostatAction {
  Heat
  Cool
  Circulate
}
